{% extends 'layout/basic.html' %}

{% load static %}

{% block title %} 首页 {% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'web/plugin/bootstrap/css/bootstrap.css' %}">
<link rel="stylesheet" href="{% static 'web/css/carousel.css' %}">

{% endblock %} 
 
{% block content %}
<div class="container">
{% if error_msg %}
 {{ error_msg }}
<a class="btn btn-success btn-sm" data-toggle="modal" data-target="#request">备件申报</a>
   
    
{% else %} 
    <h3>信息展示</h3>
    <table class="table table-striped">
    <thead>
    <tr>
    <th>编号</th>
    <th>备件名称</th>
    <th>图示</th>
    <th>数量</th>
    <th>领用</th>
    </tr>
    </thead>
    {% for sr in search_result %}
        <tr>
        <td>{{ sr.id }}</a></td>
        <td>{{ mould.name }}</td>
        <td><a target="_blank"href="{{ sr.imgs }}"><img src="{{ sr.imgs }}" class="img" style="height: 40px;"></td></a>
        <td>{{ sr.quantity }}</td>
        <td> <button type="button" class="btn btn-success" data-toggle="modal" data-target="#use{{sr.id}}">申领</button></td>



    </tr>
<!-- Modal -->
<div class="modal fade" id="use{{sr.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
    模态框{{sr.id}}号
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
    {% endfor %}</table>
    <!-- Button trigger modal -->
    <a class="btn btn-success btn-sm" data-toggle="modal" data-target="#request">备件申报</a>
{% endif %}
<nav style="text-align: center;" aria-label="...">
                <ul class="pagination" style="margin-top: 0px">
                    {{ page_html|safe }}
                </ul>
            </nav>
</div>
<!-- Modal -->
<div class="modal fade" id="request" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">备件申请</h4>
      </div>
      <div class="modal-body">
        别急，该功能正在开发^_^!
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary">提交</button>
      </div>
    </div>
  </div>
</div>




{% endblock %} 

{% block js %}

    <script src="{% static 'web/plugin/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'web/plugin/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js' %}"></script>
    <script src="{% static 'web/plugin/bootstrap-select/js/bootstrap-select.min.js' %}"></script>
    <script src="{% static 'web/plugin/bootstrap-select/js/i18n/defaults-zh_CN.min.js' %}"></script>
    <script src="{% static 'web/plugin/select2/js/select2.min.js' %}"></script>
    <script src="{% static 'web/plugin/select2/js/i18n/zh-CN.js' %}"></script>
<script>
        $(function () {
            bindBootStrapShowEvent();
            bindBootStrapRequest();
        });
        function bindBootStrapShowEvent() {
            $("#use").on('shown.bs.modal', function (event) {
                  // do something...
            });
        }
function bindBootStrapRequest(){
    $("#request").on('shown.bs.modal', function (e) {
          // do something...
}
);}

</script>

{% endblock %}